<mat-accordion>
  <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Work Site
      </mat-panel-title>
      <mat-panel-description fxLayout="end">*</mat-panel-description>
    </mat-expansion-panel-header>
    <app-worksite-safety-header [headerForm]=headerForm (checkValidHeader)=checkValidHeader()>
    </app-worksite-safety-header>
    <br>
    <div class="action-btn" fxLayoutAlign="center center">
      <button mat-stroked-button color="primary" [disabled]="isWorksiteSafetyHeaderValid$ | async"
        (click)="nextStep()">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 1" (opened)="setStep(1)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Hazard Identification & Communication
      </mat-panel-title>
      <mat-panel-description>*</mat-panel-description>
    </mat-expansion-panel-header>
    <app-worksite-safety-hazard [hazardForm]=hazardForm></app-worksite-safety-hazard>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" [disabled]="!hazardForm.valid"
        (click)="nextStep()">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 2" (opened)="setStep(2)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Job Site Management
      </mat-panel-title>
      <mat-panel-description>*</mat-panel-description>
    </mat-expansion-panel-header>
    <app-worksite-safety-jobsite [jobsiteForm]=jobsiteForm></app-worksite-safety-jobsite>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" (click)="nextStep()" [disabled]="!jobsiteForm.valid">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 3" (opened)="setStep(3)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Fire Extinguisher(s)
      </mat-panel-title>
      <mat-panel-description>*</mat-panel-description>
    </mat-expansion-panel-header>
    <app-worksite-fire-extinguisher [fireExtinguisherForm]=fireExtinguisherForm></app-worksite-fire-extinguisher>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" (click)="nextStep()" [disabled]="!fireExtinguisherForm.valid">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 4" (opened)="setStep(4)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Emergency Response Planning
      </mat-panel-title>
      <mat-panel-description>*</mat-panel-description>
    </mat-expansion-panel-header>
    <app-worksite-safety-erp-planning [erpPlanningForm]=erpPlanningForm></app-worksite-safety-erp-planning>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" (click)="nextStep()">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 5" (opened)="setStep(5)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Ground Disturbance
      </mat-panel-title>
    </mat-expansion-panel-header>
    <app-worksite-safety-ground [groundForm]=groundForm></app-worksite-safety-ground>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" (click)="nextStep()">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 6" (opened)="setStep(6)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Confined Space Entry
      </mat-panel-title>
    </mat-expansion-panel-header>
    <app-worksite-safety-confined-space [confinedSpaceForm]=confinedSpaceForm></app-worksite-safety-confined-space>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" (click)="nextStep()">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 7" (opened)="setStep(7)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Hot Work
      </mat-panel-title>
    </mat-expansion-panel-header>
    <app-worksite-safety-hot-work [hotWorkForm]=hotWorkForm></app-worksite-safety-hot-work>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" (click)="nextStep()">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 8" (opened)="setStep(8)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Summit Vehicles & Equipment
      </mat-panel-title>
    </mat-expansion-panel-header>
    <app-worksite-safety-equipment [equipmentForm]=equipmentForm></app-worksite-safety-equipment>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" (click)="nextStep()">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 9" (opened)="setStep(9)">
    <mat-expansion-panel-header class="right-aligned-header">
      <mat-panel-title class="text-color">
        Key Positive Findings
      </mat-panel-title>
      <mat-panel-description fxLayout="end">*</mat-panel-description>
    </mat-expansion-panel-header>
    <app-worksite-key-positive-finding [keyPositiveFindingsForm]=keyPositiveFindingsForm></app-worksite-key-positive-finding>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" (click)="nextStep()">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 10" (opened)="setStep(10)">
    <mat-expansion-panel-header>
      <mat-panel-title class="text-color">
        Discrepancies
      </mat-panel-title>
    </mat-expansion-panel-header>
    <app-discrepancy></app-discrepancy>
    <br>
    <div class="action-btn" fxLayoutAlign="center center" fxLayoutGap="20px">
      <button mat-stroked-button color="accent" (click)="prevStep()">Previous</button>
      <button mat-stroked-button color="primary" (click)="nextStep()">Next</button>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel *ngIf="!(isWorksiteSafetyHeaderValid$ | async)" [expanded]="step === 11" (opened)="setStep(11)">
    <mat-expansion-panel-header>
      <mat-panel-title class="text-color">
        Signature
      </mat-panel-title>
    </mat-expansion-panel-header>
    <br>
    <div class="action-btn" fxLayoutAlign="center center">
      <mat-icon *ngIf="!hazardForm.valid || !jobsiteForm.valid || !fireExtinguisherForm.valid"
        class="icon-169px text-color">fingerprint</mat-icon>
      <mat-icon *ngIf="!isEdit && hazardForm.valid && jobsiteForm.valid && fireExtinguisherForm.valid"
        class="hand icon-169px-action" (click)="submitForm()">fingerprint</mat-icon>
      <mat-icon *ngIf="isEdit && hazardForm.valid && jobsiteForm.valid && fireExtinguisherForm.valid"
        class="hand icon-169px-action" (click)="updateForm()">fingerprint</mat-icon>
    </div>
  </mat-expansion-panel>
</mat-accordion>